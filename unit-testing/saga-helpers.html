
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Saga Helpers Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="general-assertions.html" />
    
    
    <link rel="prev" href="effect-creators.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Table of Contents</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../getting-started.html">
            
                <a href="../getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../integration-testing/">
            
                <a href="../integration-testing/">
            
                    
                    Integration Testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../integration-testing/effect-creators.html">
            
                <a href="../integration-testing/effect-creators.html">
            
                    
                    Effect Creators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../integration-testing/dispatching.html">
            
                <a href="../integration-testing/dispatching.html">
            
                    
                    Dispatching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../integration-testing/timeout.html">
            
                <a href="../integration-testing/timeout.html">
            
                    
                    Timeout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../integration-testing/state.html">
            
                <a href="../integration-testing/state.html">
            
                    
                    State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../integration-testing/mocking.html">
            
                <a href="../integration-testing/mocking.html">
            
                    
                    Mocking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../integration-testing/partial-matching.html">
            
                <a href="../integration-testing/partial-matching.html">
            
                    
                    Partial Matching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../integration-testing/negated-assertions.html">
            
                <a href="../integration-testing/negated-assertions.html">
            
                    
                    Negated Assertions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../integration-testing/forked-sagas.html">
            
                <a href="../integration-testing/forked-sagas.html">
            
                    
                    Forked Sagas
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    Unit Testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="error-messages.html">
            
                <a href="error-messages.html">
            
                    
                    Error Messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="effect-creators.html">
            
                <a href="effect-creators.html">
            
                    
                    Effect Creators
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.3" data-path="saga-helpers.html">
            
                <a href="saga-helpers.html">
            
                    
                    Saga Helpers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="general-assertions.html">
            
                <a href="general-assertions.html">
            
                    
                    General Assertions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="time-travel.html">
            
                <a href="time-travel.html">
            
                    
                    Time Travel
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Saga Helpers</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="saga-helpers">Saga Helpers</h1>
<p>Redux Saga Test Plan also offers assertions for the saga helper effects
<code>takeEvery</code>, <code>takeLatest</code>, and <code>throttle</code>. These helpers come in two flavors.
Your sagas can delegate (i.e. use <code>yield*</code>) to these helpers if you import them
directly from the <code>redux-saga</code> module. This is now a deprecated pattern
according to Redux Saga. You are encouraged to now import the equivalent effect
creators for these helpers from the <code>redux-saga/effects</code> module and just yield
them like other effect creators. Redux Saga still supports delegating to the
helpers, but if it removes support for delegation, then Redux Saga Test Plan
will also necessarily remove support for testing delegations.</p>
<p>To decide which assertions you need for testing your saga, please review the
possibilities below:</p>
<ol>
<li><p>If you are using the helper effect creators from <code>redux-saga/effects</code>, you
can use the respective methods <code>takeEveryEffect</code>, <code>takeLatestEffect</code>, and
<code>throttleEffect</code> from Redux Saga Test Plan.</p>
</li>
<li><p>If your saga delegates to any of these helpers from <code>redux-saga</code> directly,
then you can use the respective <code>takeEvery</code>, <code>takeLatest</code>, and <code>throttle</code>
methods from Redux Saga Test Plan. The difference between these assertions
and the normal effect creator assertions is that you shouldn&apos;t call <code>next</code> on
your test saga beforehand. These methods will automatically advance the saga
for you.</p>
<p><strong>DEPRECATION NOTICE</strong>:<br>Delegating is now a deprecated pattern for Redux Saga. Please move to using
the effect creators added in Redux Saga
<a href="https://github.com/redux-saga/redux-saga/releases/tag/v0.14.0" target="_blank">v0.14.0</a>.
If Redux Saga removes this pattern, then Redux Saga Test Plan will also
remove the respective assertion methods.</p>
</li>
<li><p>Starting in Redux Saga
<a href="https://github.com/redux-saga/redux-saga/releases/tag/v0.12.0" target="_blank">v0.12.0</a>,
instead of delegating to the helpers from the <code>redux-saga</code> module, you could
instead yield them like normal effect creators such as <code>call</code> or <code>put</code>. These
are non-blocking yields; internally, Redux Saga will fork them like the
normal <code>fork</code> effect creator. If you yield instead of delegating, then you
can use the respective <code>takeEveryFork</code>, <code>takeLatestFork</code>, and <code>throttleFork</code>
methods from Redux Saga Test Plan. Because these assertions are like the
normal effect creator assertions, you <strong>WILL</strong> need to call <code>next</code> prior to
these assertions.</p>
<p><strong>DEPRECATION NOTICE</strong>:<br>Because these are the same helpers you can delegate to, this pattern may also
be removed by Redux Saga, meaning Redux Saga Test Plan will also remove the
respective assertion methods.</p>
</li>
</ol>
<h4 id="summary">Summary</h4>
<table>
<thead>
<tr>
<th>Helper</th>
<th>Effect Creator</th>
<th>Delegating Helper<br>DEPRECATED</th>
<th>Yielding Helper<br>DEPRECATED</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>takeEvery</code></td>
<td>Use <code>takeEveryEffect</code> assertion.<br>Call <code>next</code> before.</td>
<td>Use <code>takeEvery</code> assertion.<br>Don&apos;t call <code>next</code> before.</td>
<td>Use <code>takeEveryFork</code> assertion.<br>Call <code>next</code> before.</td>
</tr>
<tr>
<td><code>takeLatest</code></td>
<td>Use <code>takeLatestEveryEffect</code> assertion.<br>Call <code>next</code> before.</td>
<td>Use <code>takeLatest</code> assertion.<br>Don&apos;t call <code>next</code> before.</td>
<td>Use <code>takeLatestFork</code> assertion.<br>Call <code>next</code> before.</td>
</tr>
<tr>
<td><code>throttle</code></td>
<td>Use <code>throttleEffect</code> assertion.<br>Call <code>next</code> before.</td>
<td>Use <code>throttle</code> assertion.<br>Don&apos;t call <code>next</code> before.</td>
<td>Use <code>throttleFork</code> assertion.<br>Call <code>next</code> before.</td>
</tr>
</tbody>
</table>
<h4 id="delegating-example">Delegating Example</h4>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { takeEvery } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga&apos;</span>;
<span class="hljs-keyword">import</span> { call } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga/effects&apos;</span>;
<span class="hljs-keyword">import</span> testSaga <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga-test-plan&apos;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>(<span class="hljs-params">value</span>) </span>{
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">otherSaga</span>(<span class="hljs-params">action, value</span>) </span>{
  <span class="hljs-keyword">yield</span> call(identity, value);
}

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">anotherSaga</span>(<span class="hljs-params">action</span>) </span>{
  <span class="hljs-keyword">yield</span> call(identity, action.payload);
}

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">mainSaga</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">yield</span> call(identity, <span class="hljs-string">&apos;foo&apos;</span>);
  <span class="hljs-keyword">yield</span>* takeEvery(<span class="hljs-string">&apos;READY&apos;</span>, otherSaga, <span class="hljs-number">42</span>);
}

<span class="hljs-comment">// All good</span>
testSaga(mainSaga)
  .next()
  .call(identity, <span class="hljs-string">&apos;foo&apos;</span>)
  .takeEvery(<span class="hljs-string">&apos;READY&apos;</span>, otherSaga, <span class="hljs-number">42</span>)
  .finish()
  .isDone();

<span class="hljs-comment">// Will throw</span>
testSaga(mainSaga)
  .next()
  .call(identity, <span class="hljs-string">&apos;foo&apos;</span>)
  .takeEvery(<span class="hljs-string">&apos;READY&apos;</span>, anotherSaga, <span class="hljs-number">42</span>)
  .finish()
  .isDone();

<span class="hljs-comment">// SagaTestError:</span>
<span class="hljs-comment">// Assertion 2 failed: expected takeEvery to fork anotherSaga</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Expected</span>
<span class="hljs-comment">// --------</span>
<span class="hljs-comment">// [Function: anotherSaga]</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Actual</span>
<span class="hljs-comment">// ------</span>
<span class="hljs-comment">// [Function: otherSaga]</span>
</code></pre>
<h4 id="yielding-example">Yielding Example</h4>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { takeEvery } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga&apos;</span>;
<span class="hljs-keyword">import</span> { call } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga/effects&apos;</span>;
<span class="hljs-keyword">import</span> testSaga <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga-test-plan&apos;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>(<span class="hljs-params">value</span>) </span>{
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">otherSaga</span>(<span class="hljs-params">action, value</span>) </span>{
  <span class="hljs-keyword">yield</span> call(identity, value);
}

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">anotherSaga</span>(<span class="hljs-params">action</span>) </span>{
  <span class="hljs-keyword">yield</span> call(identity, action.payload);
}

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">mainSaga</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">yield</span> call(identity, <span class="hljs-string">&apos;foo&apos;</span>);
  <span class="hljs-keyword">yield</span> takeEvery(<span class="hljs-string">&apos;READY&apos;</span>, otherSaga, <span class="hljs-number">42</span>);
}

<span class="hljs-comment">// All good</span>
testSaga(mainSaga)
  .next()
  .call(identity, <span class="hljs-string">&apos;foo&apos;</span>)

  .next()
  .takeEveryFork(<span class="hljs-string">&apos;READY&apos;</span>, otherSaga, <span class="hljs-number">42</span>)

  .finish()
  .isDone();

<span class="hljs-comment">// Will throw</span>
testSaga(mainSaga)
  .next()
  .call(identity, <span class="hljs-string">&apos;foo&apos;</span>)

  .next()
  .takeEveryFork(<span class="hljs-string">&apos;READY&apos;</span>, anotherSaga, <span class="hljs-number">42</span>)

  .finish()
  .isDone();

<span class="hljs-comment">// SagaTestError:</span>
<span class="hljs-comment">// Assertion 2 failed: expected takeEvery to fork anotherSaga</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Expected</span>
<span class="hljs-comment">// --------</span>
<span class="hljs-comment">// [Function: anotherSaga]</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Actual</span>
<span class="hljs-comment">// ------</span>
<span class="hljs-comment">// [Function: otherSaga]</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="effect-creators.html" class="navigation navigation-prev " aria-label="Previous page: Effect Creators">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="general-assertions.html" class="navigation navigation-next " aria-label="Next page: General Assertions">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Saga Helpers","level":"1.4.3","depth":2,"next":{"title":"General Assertions","level":"1.4.4","depth":2,"path":"unit-testing/general-assertions.md","ref":"unit-testing/general-assertions.md","articles":[]},"previous":{"title":"Effect Creators","level":"1.4.2","depth":2,"path":"unit-testing/effect-creators.md","ref":"unit-testing/effect-creators.md","articles":[]},"dir":"ltr"},"config":{"plugins":["advanced-emoji","github"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/jfairbank/redux-saga-test-plan"},"advanced-emoji":{"embedEmojis":false},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"3.2.2"},"file":{"path":"unit-testing/saga-helpers.md","mtime":"2017-03-28T19:59:24.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-30T00:24:16.392Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

