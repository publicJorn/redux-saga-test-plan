
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Introduction Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="getting-started.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Table of Contents</li>
        
        
    
        <li class="chapter active" data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="getting-started.html">
            
                <a href="getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="integration-testing/">
            
                <a href="integration-testing/">
            
                    
                    Integration Testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="integration-testing/effect-creators.html">
            
                <a href="integration-testing/effect-creators.html">
            
                    
                    Effect Creators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="integration-testing/dispatching.html">
            
                <a href="integration-testing/dispatching.html">
            
                    
                    Dispatching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="integration-testing/timeout.html">
            
                <a href="integration-testing/timeout.html">
            
                    
                    Timeout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="integration-testing/state.html">
            
                <a href="integration-testing/state.html">
            
                    
                    State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="integration-testing/mocking.html">
            
                <a href="integration-testing/mocking.html">
            
                    
                    Mocking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="integration-testing/partial-matching.html">
            
                <a href="integration-testing/partial-matching.html">
            
                    
                    Partial Matching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="integration-testing/negated-assertions.html">
            
                <a href="integration-testing/negated-assertions.html">
            
                    
                    Negated Assertions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="integration-testing/forked-sagas.html">
            
                <a href="integration-testing/forked-sagas.html">
            
                    
                    Forked Sagas
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="unit-testing/">
            
                <a href="unit-testing/">
            
                    
                    Unit Testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="unit-testing/error-messages.html">
            
                <a href="unit-testing/error-messages.html">
            
                    
                    Error Messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="unit-testing/effect-creators.html">
            
                <a href="unit-testing/effect-creators.html">
            
                    
                    Effect Creators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="unit-testing/saga-helpers.html">
            
                <a href="unit-testing/saga-helpers.html">
            
                    
                    Saga Helpers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="unit-testing/general-assertions.html">
            
                <a href="unit-testing/general-assertions.html">
            
                    
                    General Assertions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="unit-testing/time-travel.html">
            
                <a href="unit-testing/time-travel.html">
            
                    
                    Time Travel
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Introduction</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="redux-saga-test-plan">Redux Saga Test Plan</h1>
<p><a href="https://www.npmjs.com/package/redux-saga-test-plan" target="_blank"><img src="https://img.shields.io/npm/v/redux-saga-test-plan.svg?style=flat-square" alt="npm"></a>
<a href="https://travis-ci.org/jfairbank/redux-saga-test-plan" target="_blank"><img src="https://img.shields.io/travis/jfairbank/redux-saga-test-plan/master.svg?style=flat-square" alt="Travis branch"></a>
<a href="https://codecov.io/gh/jfairbank/redux-saga-test-plan" target="_blank"><img src="https://img.shields.io/codecov/c/github/jfairbank/redux-saga-test-plan.svg?style=flat-square" alt="Codecov"></a></p>
<h4 id="powerful-test-helpers-for-redux-saga">Powerful test helpers for Redux Saga.</h4>
<p>Redux Saga Test Plan makes testing sagas a breeze. Whether you need to test
exact effects and their ordering or just test your saga <code>put</code>&apos;s a specific
action at some point, Redux Saga Test Plan has you covered.</p>
<p>Redux Saga Test Plan aims to embrace both unit testing and integration testing
approaches to make testing your sagas easy.</p>
<h2 id="integration-testing">Integration Testing</h2>
<p><strong>Requires global <code>Promise</code> to be available</strong></p>
<p>One downside to unit testing sagas is that it couples your test to your
implementation. Simple reordering of yielded effects in your saga could break
your tests even if the functionality stays the same. If you&apos;re not concerned
with the order or exact effects your saga yields, then you can take a
integrative approach, testing the behavior of your saga when run by Redux Saga.
Then, you can simply test that a particular effect was yielded during the saga
run. For this, use the <code>expectSaga</code> test function.</p>
<h3 id="simple-example">Simple Example</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { expectSaga } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga-test-plan&apos;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>(<span class="hljs-params">value</span>) </span>{
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">mainSaga</span>(<span class="hljs-params">x, y</span>) </span>{
  <span class="hljs-keyword">const</span> action = <span class="hljs-keyword">yield</span> take(<span class="hljs-string">&apos;HELLO&apos;</span>);

  <span class="hljs-keyword">yield</span> put({ type: <span class="hljs-string">&apos;ADD&apos;</span>, payload: x + y });
  <span class="hljs-keyword">yield</span> call(identity, action);
}

it(<span class="hljs-string">&apos;just works!&apos;</span>, () =&gt; {
  <span class="hljs-keyword">return</span> expectSaga(mainSaga, <span class="hljs-number">40</span>, <span class="hljs-number">2</span>)
    <span class="hljs-comment">// assert that the saga will eventually yield `put`</span>
    <span class="hljs-comment">// with the expected action</span>
    .put({ type: <span class="hljs-string">&apos;ADD&apos;</span>, payload: <span class="hljs-number">42</span> })

    <span class="hljs-comment">// dispatch any actions your saga will `take`</span>
    .dispatch({ type: <span class="hljs-string">&apos;HELLO&apos;</span> })

    <span class="hljs-comment">// run it</span>
    .run();
});
</code></pre>
<h3 id="example-with-reducer">Example with Reducer</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { expectSaga } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga-test-plan&apos;</span>;

<span class="hljs-keyword">const</span> HAVE_BIRTHDAY = <span class="hljs-string">&apos;HAVE_BIRTHDAY&apos;</span>;
<span class="hljs-keyword">const</span> AGE_BEFORE = <span class="hljs-string">&apos;AGE_BEFORE&apos;</span>;
<span class="hljs-keyword">const</span> AGE_AFTER = <span class="hljs-string">&apos;AGE_AFTER&apos;</span>;

<span class="hljs-keyword">const</span> initialDog = {
  name: <span class="hljs-string">&apos;Tucker&apos;</span>,
  age: <span class="hljs-number">11</span>,
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dogReducer</span>(<span class="hljs-params">state = initialDog, action</span>) </span>{
  <span class="hljs-keyword">if</span> (action.type === HAVE_BIRTHDAY) {
    <span class="hljs-keyword">return</span> {
      ...state,
      age: state.age + <span class="hljs-number">1</span>,
    };
  }

  <span class="hljs-keyword">return</span> state;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAge</span>(<span class="hljs-params">state</span>) </span>{
  <span class="hljs-keyword">return</span> state.age;
}

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">saga</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> ageBefore = <span class="hljs-keyword">yield</span> select(getAge);

  <span class="hljs-keyword">yield</span> put({ type: AGE_BEFORE, payload: ageBefore });

  <span class="hljs-keyword">yield</span> take(HAVE_BIRTHDAY);

  <span class="hljs-keyword">const</span> ageAfter = <span class="hljs-keyword">yield</span> select(getAge);

  <span class="hljs-keyword">yield</span> put({ type: AGE_AFTER, payload: ageAfter });
}

it(<span class="hljs-string">&apos;handles reducers&apos;</span>, () =&gt; {
  <span class="hljs-keyword">return</span> expectSaga(saga)
    .withReducer(dogReducer)

    .put({ type: AGE_BEFORE, payload: <span class="hljs-number">11</span> })
    .put({ type: AGE_AFTER, payload: <span class="hljs-number">12</span> })

    .dispatch({ type: HAVE_BIRTHDAY })

    .run();
});
</code></pre>
<p>Yes, it&apos;s that simple to test with <code>expectSaga</code>.</p>
<h2 id="unit-testing">Unit Testing</h2>
<p>If you want to ensure that your saga yields specific types of effects in a
particular order, then you&apos;ll want to use the <code>testSaga</code> function. Here&apos;s a
simple example:</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { testSaga } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga-test-plan&apos;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>(<span class="hljs-params">value</span>) </span>{
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">mainSaga</span>(<span class="hljs-params">x, y</span>) </span>{
  <span class="hljs-keyword">const</span> action = <span class="hljs-keyword">yield</span> take(<span class="hljs-string">&apos;HELLO&apos;</span>);

  <span class="hljs-keyword">yield</span> put({ type: <span class="hljs-string">&apos;ADD&apos;</span>, payload: x + y });
  <span class="hljs-keyword">yield</span> call(identity, action);
}

<span class="hljs-keyword">const</span> action = { type: <span class="hljs-string">&apos;TEST&apos;</span> };

it(<span class="hljs-string">&apos;works with unit tests&apos;</span>, () =&gt; {
  testSaga(mainSaga, <span class="hljs-number">40</span>, <span class="hljs-number">2</span>);
    <span class="hljs-comment">// advance saga with `next()`</span>
    .next()

    <span class="hljs-comment">// assert that the saga yields `take` with `&apos;HELLO&apos;` as type</span>
    .take(<span class="hljs-string">&apos;HELLO&apos;</span>)

    <span class="hljs-comment">// pass back in a value to a saga after it yields</span>
    .next(action)

    <span class="hljs-comment">// assert that the saga yields `put` with the expected action</span>
    .put({ type: <span class="hljs-string">&apos;ADD&apos;</span>, payload: <span class="hljs-number">42</span> })

    .next()

    <span class="hljs-comment">// assert that the saga yields a `call` to `identity` with</span>
    <span class="hljs-comment">// the `action` argument</span>
    .call(identity, action)

    .next()

    <span class="hljs-comment">// assert that the saga is finished</span>
    .isDone();
});
</code></pre>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="./">Introduction</a></li>
<li><a href="getting-started.html">Getting Started</a></li>
<li><a href="integration-testing/">Integration Testing</a><ul>
<li><a href="integration-testing/effect-creators.html">Effect Creators</a></li>
<li><a href="integration-testing/dispatching.html">Dispatching</a></li>
<li><a href="integration-testing/timeout.html">Timeout</a></li>
<li><a href="integration-testing/state.html">State</a></li>
<li><a href="integration-testing/mocking.html">Mocking</a></li>
<li><a href="integration-testing/partial-matching.html">Partial Matching</a></li>
<li><a href="integration-testing/negated-assertions.html">Negated Assertions</a></li>
<li><a href="integration-testing/forked-sagas.html">Forked Sagas</a></li>
</ul>
</li>
<li><a href="unit-testing/">Unit Testing</a><ul>
<li><a href="unit-testing/error-messages.html">Error Messages</a></li>
<li><a href="unit-testing/effect-creators.html">Effect Creators</a></li>
<li><a href="unit-testing/saga-helpers.html">Saga Helpers</a></li>
<li><a href="unit-testing/general-assertions.html">General Assertions</a></li>
<li><a href="unit-testing/time-travel.html">Time Travel</a></li>
</ul>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="getting-started.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Getting Started">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Introduction","level":"1.1","depth":1,"next":{"title":"Getting Started","level":"1.2","depth":1,"path":"getting-started.md","ref":"getting-started.md","articles":[]},"dir":"ltr"},"config":{"plugins":["advanced-emoji","github"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/jfairbank/redux-saga-test-plan"},"advanced-emoji":{"embedEmojis":false},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"3.2.2"},"file":{"path":"README.md","mtime":"2017-03-30T00:22:16.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-30T00:24:16.392Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

